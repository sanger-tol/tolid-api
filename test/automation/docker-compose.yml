# SPDX-FileCopyrightText: 2021 Genome Research Ltd.
#
# SPDX-License-Identifier: MIT

# This is used for local development only
version: '3.1'

services:
  tolid-robot-runner:
    build:
      context: .
      dockerfile: Dockerfile
    platform: linux/amd64
    volumes:
      # run from test/automation directory
      - "$PWD/results:/app/src/results"
    environment:
      - env
      - browser
      - base_url
      - webdriver_url=http://tolid-chrome:4444/wd/hub
  
  tolid-chrome:
    image: seleniarm/standalone-chromium
    ports:
      # this left port needs to be different on every app!
      - 7902:7900
    shm_size: 2gb
